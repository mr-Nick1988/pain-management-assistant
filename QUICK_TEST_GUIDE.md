# üöÄ –ë–´–°–¢–†–´–ô –¢–ï–°–¢ External VAS Integration

## ‚úÖ –ß–¢–û –î–û–ë–ê–í–õ–ï–ù–û

–í **External VAS Monitor** —Ç–µ–ø–µ—Ä—å –µ—Å—Ç—å **2 –≤–∫–ª–∞–¥–∫–∏**:
1. **üìä Monitor** - –ø—Ä–æ—Å–º–æ—Ç—Ä VAS –∑–∞–ø–∏—Å–µ–π (–±—ã–ª–æ —Ä–∞–Ω—å—à–µ)
2. **üß™ Device Simulator** - –æ—Ç–ø—Ä–∞–≤–∫–∞ VAS —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–ù–û–í–û–ï!)

---

## üìã –ü–û–®–ê–ì–û–í–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø

### –®–ê–ì 1: –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# Backend (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞ –ø–æ—Ä—Ç—É 8080)
# Frontend
cd C:\front_projects\pain_management_assistant
npm run dev
```

–û—Ç–∫—Ä–æ–µ—Ç—Å—è: `http://localhost:5173`

---

### –®–ê–ì 2: –í–æ–π—Ç–∏ –∫–∞–∫ Admin

```
Login: admin
Password: (–≤–∞—à –ø–∞—Ä–æ–ª—å)
```

---

### –®–ê–ì 3: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å API –∫–ª—é—á

1. **–ü–µ—Ä–µ–π—Ç–∏:** Admin Dashboard ‚Üí üîë **API Key Management**
2. **–ù–∞–∂–∞—Ç—å:** "+ Generate New API Key"
3. **–ó–∞–ø–æ–ª–Ω–∏—Ç—å:**
   - System Name: `Test`
   - –û—Å—Ç–∞–ª—å–Ω–æ–µ –æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
4. **–ù–∞–∂–∞—Ç—å:** "Generate"
5. **–í–ê–ñ–ù–û!** –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ü–û–õ–ù–´–ô –∫–ª—é—á –∏–∑ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞:
   ```
   pma_live_a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
   ```
6. **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –±–ª–æ–∫–Ω–æ—Ç!**

---

### –®–ê–ì 4: –°–æ–∑–¥–∞—Ç—å –ø–∞—Ü–∏–µ–Ω—Ç–∞ (–µ—Å–ª–∏ –Ω–µ—Ç)

**–í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Backend API**
```bash
curl -X POST http://localhost:8080/api/emr/mock/generate
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ Frontend**
- Nurse Dashboard ‚Üí Register Patient
- –ó–∞–ø–æ–º–Ω–∏—Ç—å MRN (–Ω–∞–ø—Ä–∏–º–µ—Ä: `MRN-42`)

---

### –®–ê–ì 5: –û—Ç–ø—Ä–∞–≤–∏—Ç—å VAS —á–µ—Ä–µ–∑ Simulator

1. **–ü–µ—Ä–µ–π—Ç–∏:** Nurse Dashboard ‚Üí üì° **External VAS Monitor**
2. **–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É:** üß™ **Device Simulator**
3. **–ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É:**
   ```
   üîë API Key: pma_live_a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
   üë§ Patient MRN: MRN-42
   üìä VAS Level: 8 (–¥–≤–∏–≥–∞–µ–º slider –≤–ø—Ä–∞–≤–æ)
   üñ•Ô∏è Device ID: MONITOR-001
   üìç Location: Ward A, Bed 12
   üîå Source: VAS Monitor
   üìù Notes: Test from simulator
   ```
4. **–ù–∞–∂–∞—Ç—å:** üì° **Send VAS Record**

---

### –®–ê–ì 6: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:**
```
‚úÖ Success toast: "VAS Record Created! ID: 123"
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É "Monitor"**

**–í —Ç–∞–±–ª–∏—Ü–µ –ø–æ—è–≤–∏—Ç—Å—è –∑–∞–ø–∏—Å—å:**
```
Time: Just now
Patient: [–ò–º—è] MRN-42
VAS Level: üî¥ 8
Device: MONITOR-001
Location: Ward A, Bed 12
Source: VAS_MONITOR
Notes: Test from simulator
```

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–∏—Ç—Å—è:**
```
Total Records Today: 1
Average VAS: 8.0
High Pain Alerts: üî¥ 1
Active Devices: 1
```

---

## üéØ –ß–¢–û –¢–ï–°–¢–ò–†–û–í–ê–¢–¨

### ‚úÖ –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è API –∫–ª—é—á–∞
- [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ VAS —á–µ—Ä–µ–∑ Simulator
- [ ] –ó–∞–ø–∏—Å—å –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ Monitor
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- [ ] Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç

### ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è
- [ ] –ë–µ–∑ API –∫–ª—é—á–∞ ‚Üí –æ—à–∏–±–∫–∞ "Please enter API Key"
- [ ] –ë–µ–∑ Patient MRN ‚Üí –æ—à–∏–±–∫–∞ "Please enter Patient MRN"
- [ ] –ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á ‚Üí –æ—à–∏–±–∫–∞ "Invalid API key"
- [ ] –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–∞—Ü–∏–µ–Ω—Ç ‚Üí –æ—à–∏–±–∫–∞ "Patient not found"

### ‚úÖ –§–∏–ª—å—Ç—Ä—ã (–≤–∫–ª–∞–¥–∫–∞ Monitor)
- [ ] –§–∏–ª—å—Ç—Ä –ø–æ Device ID
- [ ] –§–∏–ª—å—Ç—Ä –ø–æ Location
- [ ] –§–∏–ª—å—Ç—Ä –ø–æ Time Range (1h, 6h, 24h)
- [ ] Auto-refresh –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥

### ‚úÖ UI/UX
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏
- [ ] Slider –¥–ª—è VAS Level (—Ü–≤–µ—Ç –º–µ–Ω—è–µ—Ç—Å—è: –∑–µ–ª–µ–Ω—ã–π ‚Üí –∂–µ–ª—Ç—ã–π ‚Üí –∫—Ä–∞—Å–Ω—ã–π)
- [ ] –ö–Ω–æ–ø–∫–∞ Reset –æ—á–∏—â–∞–µ—Ç —Ñ–æ—Ä–º—É
- [ ] –ö–Ω–æ–ø–∫–∞ Send –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏
- [ ] –ö–ª–∏–∫ –Ω–∞ –∑–∞–ø–∏—Å—å ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –∫ –ø–∞—Ü–∏–µ–Ω—Ç—É

---

## üß™ –¢–ï–°–¢ –°–¶–ï–ù–ê–†–ò–ò

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ù–∏–∑–∫–∞—è –±–æ–ª—å (VAS 0-3)
```
VAS Level: 2
–û–∂–∏–¥–∞–µ—Ç—Å—è: üü¢ –ó–µ–ª–µ–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –°—Ä–µ–¥–Ω—è—è –±–æ–ª—å (VAS 4-6)
```
VAS Level: 5
–û–∂–∏–¥–∞–µ—Ç—Å—è: üü° –ñ–µ–ª—Ç—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –í—ã—Å–æ–∫–∞—è –±–æ–ª—å (VAS 7-10)
```
VAS Level: 9
–û–∂–∏–¥–∞–µ—Ç—Å—è: üî¥ –ö—Ä–∞—Å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä + High Pain Alert +1
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ù–µ—Å–∫–æ–ª—å–∫–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
```
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å VAS —Å MONITOR-001
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å VAS —Å MONITOR-002
3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å VAS —Å TABLET-001

–û–∂–∏–¥–∞–µ—Ç—Å—è: Active Devices = 3
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 5: Batch Import (—á–µ—Ä–µ–∑ Postman)
```bash
POST http://localhost:8080/api/external/vas/batch
Headers:
  X-API-Key: pma_live_...
  Content-Type: text/csv

Body:
patientMrn,vasLevel,deviceId,location,timestamp
MRN-42,7,MONITOR-001,Ward A,2025-10-26T08:00:00
MRN-42,6,MONITOR-001,Ward A,2025-10-26T09:00:00
MRN-42,9,MONITOR-001,Ward A,2025-10-26T10:00:00

–û–∂–∏–¥–∞–µ—Ç—Å—è: 3 –∑–∞–ø–∏—Å–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞
```

---

## ‚ùå TROUBLESHOOTING

### –ü—Ä–æ–±–ª–µ–º–∞: "Invalid API key"
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–ª—é—á —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–ª—é—á –∞–∫—Ç–∏–≤–µ–Ω (Admin ‚Üí API Key Management)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Backend –∑–∞–ø—É—â–µ–Ω

### –ü—Ä–æ–±–ª–µ–º–∞: "Patient not found"
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–∞—Ü–∏–µ–Ω—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (MRN –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π)
2. –°–æ–∑–¥–∞—Ç—å –ø–∞—Ü–∏–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ Nurse ‚Üí Register Patient

### –ü—Ä–æ–±–ª–µ–º–∞: –ó–∞–ø–∏—Å—å –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ Monitor
**–†–µ—à–µ–Ω–∏–µ:**
1. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã (—Å–±—Ä–æ—Å–∏—Ç—å –Ω–∞ "All")
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Time Range (–≤—ã–±—Ä–∞—Ç—å "Last 24 Hours")

### –ü—Ä–æ–±–ª–µ–º–∞: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:**
1. –ù–∞–∂–∞—Ç—å F5
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Backend endpoints —Ä–∞–±–æ—Ç–∞—é—Ç:
   ```bash
   curl http://localhost:8080/api/external/vas/stats
   curl http://localhost:8080/api/external/vas/records
   ```

---

## üé¨ –ü–†–ï–ó–ï–ù–¢–ê–¶–ò–û–ù–ù–´–ô –°–¶–ï–ù–ê–†–ò–ô (10 –º–∏–Ω—É—Ç)

### 0:00-0:02 - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è API –∫–ª—é—á–∞
- –ü–æ–∫–∞–∑–∞—Ç—å Admin ‚Üí API Key Management
- –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á
- –ü–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ –∫–ª—é—á –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –û–î–ò–ù –†–ê–ó –ø–æ–ª–Ω–æ—Å—Ç—å—é
- –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ masked: `pma_live_a1b2c3d4****`

### 0:02-0:05 - –û—Ç–ø—Ä–∞–≤–∫–∞ VAS —á–µ—Ä–µ–∑ Simulator
- –û—Ç–∫—Ä—ã—Ç—å Nurse ‚Üí External VAS Monitor
- –í–∫–ª–∞–¥–∫–∞ Device Simulator
- –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É (VAS = 8)
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å
- –ü–æ–∫–∞–∑–∞—Ç—å success toast

### 0:05-0:07 - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Monitor
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ Monitor
- –ó–∞–ø–∏—Å—å –ø–æ—è–≤–∏–ª–∞—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–∏–ª–∞—Å—å
- VAS Level –∫—Ä–∞—Å–Ω—ã–π (üî¥ 8)

### 0:07-0:09 - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- –§–∏–ª—å—Ç—Ä –ø–æ Device
- –§–∏–ª—å—Ç—Ä –ø–æ Location
- –§–∏–ª—å—Ç—Ä –ø–æ Time Range

### 0:09-0:10 - Batch Import (Postman)
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å CSV —Å 3 –∑–∞–ø–∏—Å—è–º–∏
- –ü–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ –≤—Å–µ 3 –ø–æ—è–≤–∏–ª–∏—Å—å
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–µ—Ä–µ—Å—á–∏—Ç–∞–ª–∞—Å—å

---

## üìä –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

–ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ 1 VAS –∑–∞–ø–∏—Å–∏ (VAS=8):
```
‚úÖ Success toast
‚úÖ –ó–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ Monitor
‚úÖ Total Records Today: 1
‚úÖ Average VAS: 8.0
‚úÖ High Pain Alerts: 1 (üî¥)
‚úÖ Active Devices: 1
‚úÖ API Key Usage Count: 1
```

–ü–æ—Å–ª–µ batch import 3 –∑–∞–ø–∏—Å–µ–π (VAS=7,6,9):
```
‚úÖ Total Records Today: 4
‚úÖ Average VAS: 7.5
‚úÖ High Pain Alerts: 2 (VAS 8 –∏ 9)
‚úÖ Active Devices: 1
‚úÖ API Key Usage Count: 4
```

---

## üî• –ë–´–°–¢–†–´–ï –ö–û–ú–ê–ù–î–´

### Health Check
```bash
curl http://localhost:8080/api/external/vas/health
```

### –°–æ–∑–¥–∞—Ç—å –ø–∞—Ü–∏–µ–Ω—Ç–∞
```bash
curl -X POST http://localhost:8080/api/emr/mock/generate
```

### –û—Ç–ø—Ä–∞–≤–∏—Ç—å VAS (curl)
```bash
curl -X POST http://localhost:8080/api/external/vas/record \
  -H "X-API-Key: pma_live_XXXXXXXX" \
  -H "Content-Type: application/json" \
  -d '{"patientMrn":"MRN-42","vasLevel":8,"deviceId":"MONITOR-001","location":"Ward A"}'
```

### –ü–æ–ª—É—á–∏—Ç—å –∑–∞–ø–∏—Å–∏
```bash
curl http://localhost:8080/api/external/vas/records?timeRange=24h
```

### –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
```bash
curl http://localhost:8080/api/external/vas/stats
```

---

## ‚úÖ –ò–¢–û–ì–û–í–´–ô CHECKLIST

**–ü–µ—Ä–µ–¥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º:**
- [ ] Backend –∑–∞–ø—É—â–µ–Ω (port 8080)
- [ ] Frontend –∑–∞–ø—É—â–µ–Ω (port 5173)
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω–∞
- [ ] –°–æ–∑–¥–∞–Ω —Ö–æ—Ç—è –±—ã 1 –ø–∞—Ü–∏–µ–Ω—Ç

**–í–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–∞:**
- [ ] API –∫–ª—é—á —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω
- [ ] VAS –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω —á–µ—Ä–µ–∑ Simulator
- [ ] –ó–∞–ø–∏—Å—å –ø–æ—è–≤–∏–ª–∞—Å—å –≤ Monitor
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- [ ] –§–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è

**–ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏!** üéâ
